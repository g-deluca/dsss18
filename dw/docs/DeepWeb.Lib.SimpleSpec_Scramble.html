<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>DeepWeb.Lib.SimpleSpec_Scramble</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library DeepWeb.Lib.SimpleSpec_Scramble</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Relations.Relations.html#"><span class="id" title="library">Relations</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Classes.RelationClasses.html#"><span class="id" title="library">RelationClasses</span></a>.<br/>

<br/>
<span class="id" title="var">From</span> <span class="id" title="var">QuickChick</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">QuickChick</span>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">Custom</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Custom.List.html#"><span class="id" title="library">List</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">Custom</span> <span class="id" title="keyword">Require</span> <a class="idref" href="Custom.Map.html#"><span class="id" title="library">Map</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#"><span class="id" title="library">DeepWeb.Free.Monad.Free</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#"><span class="id" title="library">DeepWeb.Free.Monad.Common</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">SumNotations</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DeepWeb.Lib.Util.html#"><span class="id" title="library">DeepWeb.Lib.Util</span></a>.<br/>

<br/>
<span class="id" title="var">From</span> <span class="id" title="var">DeepWeb</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#"><span class="id" title="library">Lib.SimpleSpec_NetworkModel</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#"><span class="id" title="library">Lib.SimpleSpec_Traces</span></a>.<br/>

<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Bullet</span> <span class="id" title="var">Behavior</span> "Strict Subproofs".<br/>

<br/>
<span class="comment">(*&nbsp;Main&nbsp;facts&nbsp;about&nbsp;<span class="inlinecode"><span class="id" title="var">network_scrambled</span></span>&nbsp;*)</span><br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <a name="ScramblingTypes"><span class="id" title="module">ScramblingTypes</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;This&nbsp;predicates&nbsp;defines&nbsp;"well-formed"&nbsp;traces,&nbsp;where<br/>
&nbsp;&nbsp;&nbsp;connections&nbsp;must&nbsp;be&nbsp;open&nbsp;before&nbsp;messages&nbsp;can&nbsp;be&nbsp;sent&nbsp;on&nbsp;them.&nbsp;*)</span><br/>
<span class="id" title="keyword">Parameter</span> <a name="ScramblingTypes.wf_trace"><span class="id" title="axiom">wf_trace</span></a> : <span class="id" title="keyword">∀</span> {<span class="id" title="var">byte'</span>}, <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#event"><span class="id" title="inductive">event</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#byte'"><span class="id" title="variable">byte'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>.<br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;restrict&nbsp;the&nbsp;relation&nbsp;<span class="inlinecode"><span class="id" title="var">network_scrambled</span></span>&nbsp;to&nbsp;well-formed<br/>
&nbsp;&nbsp;&nbsp;traces,&nbsp;by&nbsp;making&nbsp;this&nbsp;vacuously&nbsp;true&nbsp;on&nbsp;bad&nbsp;traces.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="ScramblingTypes.network_scrambled_wf_"><span class="id" title="definition">network_scrambled_wf_</span></a> <span class="id" title="var">ns</span> (<span class="id" title="var">tr0</span> <span class="id" title="var">tr1</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#real_trace"><span class="id" title="definition">real_trace</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingTypes.wf_trace"><span class="id" title="axiom">wf_trace</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr0"><span class="id" title="variable">tr0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingTypes.wf_trace"><span class="id" title="axiom">wf_trace</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr1"><span class="id" title="variable">tr1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#network_scrambled_"><span class="id" title="inductive">network_scrambled_</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns"><span class="id" title="variable">ns</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr0"><span class="id" title="variable">tr0</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr1"><span class="id" title="variable">tr1</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;consider&nbsp;scramblings&nbsp;of&nbsp;well-formed&nbsp;traces&nbsp;from&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;initial&nbsp;state.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="ScramblingTypes.network_scrambled_wf"><span class="id" title="definition">network_scrambled_wf</span></a> := <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingTypes.network_scrambled_wf_"><span class="id" title="definition">network_scrambled_wf_</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#initial_ns"><span class="id" title="definition">initial_ns</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Then&nbsp;<span class="inlinecode"><span class="id" title="var">network_scrambled_wf0</span></span>&nbsp;is&nbsp;reflexive.&nbsp;*)</span><br/>
<span class="id" title="keyword">Declare Instance</span> <a name="ScramblingTypes.scrambled_reflexive"><span class="id" title="instance">scrambled_reflexive</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Classes.RelationClasses.html#Reflexive"><span class="id" title="class">Reflexive</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingTypes.network_scrambled_wf"><span class="id" title="definition">network_scrambled_wf</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;And&nbsp;<span class="inlinecode"><span class="id" title="var">network_scrambled0</span></span>&nbsp;is&nbsp;transitive.&nbsp;*)</span><br/>
<span class="id" title="keyword">Declare Instance</span> <a name="ScramblingTypes.scrambled_transitive"><span class="id" title="instance">scrambled_transitive</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Classes.RelationClasses.html#Transitive"><span class="id" title="class">Transitive</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#network_scrambled"><span class="id" title="definition">network_scrambled</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Note&nbsp;that&nbsp;the&nbsp;"well-formedness"&nbsp;precondition&nbsp;is&nbsp;implicit<br/>
&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;two&nbsp;preconditions&nbsp;of&nbsp;transitivity.&nbsp;*)</span><br/>
<span class="id" title="keyword">Parameter</span> <a name="ScramblingTypes.scrambled_preserves_wf"><span class="id" title="axiom">scrambled_preserves_wf</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">tr</span> <span class="id" title="var">str</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#real_trace"><span class="id" title="definition">real_trace</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#network_scrambled"><span class="id" title="definition">network_scrambled</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#str"><span class="id" title="variable">str</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingTypes.wf_trace"><span class="id" title="axiom">wf_trace</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingTypes.wf_trace"><span class="id" title="axiom">wf_trace</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#str"><span class="id" title="variable">str</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingTypes"><span class="id" title="module">ScramblingTypes</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="ScramblingFacts"><span class="id" title="module">ScramblingFacts</span></a> &lt;: <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingTypes"><span class="id" title="module">ScramblingTypes</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="ScramblingFacts.project_trace_on"><span class="id" title="definition">project_trace_on</span></a> {<span class="id" title="var">byte'</span>} (<span class="id" title="var">c</span> : <a class="idref" href="DeepWeb.Lib.Util.html#connection_id"><span class="id" title="inductive">connection_id</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#event"><span class="id" title="inductive">event</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#byte'"><span class="id" title="variable">byte'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#event"><span class="id" title="inductive">event</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#byte'"><span class="id" title="variable">byte'</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">ev</span> ⇒ <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#event_connection"><span class="id" title="definition">event_connection</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ev"><span class="id" title="variable">ev</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="notation">?</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="ScramblingFacts.is_ToFromServer"><span class="id" title="definition">is_ToFromServer</span></a> {<span class="id" title="var">byte'</span>} (<span class="id" title="var">ev</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#event"><span class="id" title="inductive">event</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#byte'"><span class="id" title="variable">byte'</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ev"><span class="id" title="variable">ev</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#NewConnection"><span class="id" title="constructor">NewConnection</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#ToServer"><span class="id" title="constructor">ToServer</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> | <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#FromServer"><span class="id" title="constructor">FromServer</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="ScramblingFacts.wf_projection"><span class="id" title="definition">wf_projection</span></a> {<span class="id" title="var">byte'</span>} (<span class="id" title="var">tr</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#event"><span class="id" title="inductive">event</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#byte'"><span class="id" title="variable">byte'</span></a>)) : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#NewConnection"><span class="id" title="constructor">NewConnection</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">tr'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.is_ToFromServer"><span class="id" title="definition">is_ToFromServer</span></a> <span class="id" title="var">tr'</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#ToServer"><span class="id" title="constructor">ToServer</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> | <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#FromServer"><span class="id" title="constructor">FromServer</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="ScramblingFacts.wf_trace"><span class="id" title="definition">wf_trace</span></a> {<span class="id" title="var">byte'</span>} (<span class="id" title="var">tr</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#event"><span class="id" title="inductive">event</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#byte'"><span class="id" title="variable">byte'</span></a>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#is_true"><span class="id" title="definition">is_true</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.wf_projection"><span class="id" title="definition">wf_projection</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.project_trace_on"><span class="id" title="definition">project_trace_on</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="ScramblingFacts.open_trace"><span class="id" title="definition">open_trace</span></a> {<span class="id" title="var">byte'</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_open</span> : <a class="idref" href="DeepWeb.Lib.Util.html#connection_id"><span class="id" title="inductive">connection_id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<span class="id" title="var">tr</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#event"><span class="id" title="inductive">event</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#byte'"><span class="id" title="variable">byte'</span></a>)) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#NewConnection"><span class="id" title="constructor">NewConnection</span></a> <span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">tr</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#is_open"><span class="id" title="variable">is_open</span></a> <span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#open_trace"><span class="id" title="definition">open_trace</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">c'</span> ⇒ <span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#c'"><span class="id" title="variable">c'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#is_open"><span class="id" title="variable">is_open</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#c'"><span class="id" title="variable">c'</span></a>) <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#ToServer"><span class="id" title="constructor">ToServer</span></a> <span class="id" title="var">c</span> <span class="id" title="var">_</span> | <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#FromServer"><span class="id" title="constructor">FromServer</span></a> <span class="id" title="var">c</span> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">tr</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#is_open"><span class="id" title="variable">is_open</span></a> <span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#open_trace"><span class="id" title="definition">open_trace</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#is_open"><span class="id" title="variable">is_open</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="ScramblingFacts.open_trace_prop"><span class="id" title="lemma">open_trace_prop</span></a> {<span class="id" title="var">byte'</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_open</span> <span class="id" title="var">is_open'</span> : <span class="id" title="var">_</span>) (<span class="id" title="var">tr</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#event"><span class="id" title="inductive">event</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#byte'"><span class="id" title="variable">byte'</span></a>)) :<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.open_trace"><span class="id" title="definition">open_trace</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#is_open"><span class="id" title="variable">is_open</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">c</span>, <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#is_open"><span class="id" title="variable">is_open</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">↔</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#is_open'"><span class="id" title="variable">is_open'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.open_trace"><span class="id" title="definition">open_trace</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#is_open'"><span class="id" title="variable">is_open'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">is_open</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">is_open'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">as</span> [ | [ <span class="id" title="var">c</span> | <span class="id" title="var">c</span> <span class="id" title="var">b</span> | <span class="id" title="var">c</span> <span class="id" title="var">b</span>] <span class="id" title="var">tr</span> ];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">is_open</span> <span class="id" title="var">is_open'</span> <span class="id" title="var">Htr_open</span> <span class="id" title="var">Hopen</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hopen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Htr_open</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">Htr_open</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span> <span class="id" title="var">c0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hc0</span> | <span class="id" title="var">Hc0</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hopen</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hopen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Htr_open</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">Htr_open</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hopen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Htr_open</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">Htr_open</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <a name="ScramblingFacts.equiv_open_wf"><span class="id" title="axiom">equiv_open_wf</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">byte'</span>} (<span class="id" title="var">tr</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#event"><span class="id" title="inductive">event</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#byte'"><span class="id" title="variable">byte'</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.open_trace"><span class="id" title="definition">open_trace</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>) <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">↔</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.wf_trace"><span class="id" title="definition">wf_trace</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="ScramblingFacts.scrambled_preserves_wf"><span class="id" title="lemma">scrambled_preserves_wf</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">tr</span> <span class="id" title="var">str</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#real_trace"><span class="id" title="definition">real_trace</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#network_scrambled"><span class="id" title="definition">network_scrambled</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#str"><span class="id" title="variable">str</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.wf_trace"><span class="id" title="definition">wf_trace</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.wf_trace"><span class="id" title="definition">wf_trace</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#str"><span class="id" title="variable">str</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="ScramblingFacts.network_scrambled_wf_"><span class="id" title="definition">network_scrambled_wf_</span></a> <span class="id" title="var">ns</span> (<span class="id" title="var">tr0</span> <span class="id" title="var">tr1</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#real_trace"><span class="id" title="definition">real_trace</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.wf_trace"><span class="id" title="definition">wf_trace</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr0"><span class="id" title="variable">tr0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.wf_trace"><span class="id" title="definition">wf_trace</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr1"><span class="id" title="variable">tr1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#network_scrambled_"><span class="id" title="inductive">network_scrambled_</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns"><span class="id" title="variable">ns</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr0"><span class="id" title="variable">tr0</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr1"><span class="id" title="variable">tr1</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="ScramblingFacts.network_scrambled_wf"><span class="id" title="definition">network_scrambled_wf</span></a> := <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.network_scrambled_wf_"><span class="id" title="definition">network_scrambled_wf_</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#initial_ns"><span class="id" title="definition">initial_ns</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Unproved.&nbsp;*)</span><br/>
<span class="id" title="keyword">Section</span> <a name="ScramblingFacts.TransitivityProof"><span class="id" title="section">TransitivityProof</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="ScramblingFacts.combined_networks"><span class="id" title="definition">combined_networks</span></a> (<span class="id" title="var">ns01</span> <span class="id" title="var">ns12</span> <span class="id" title="var">ns02</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#network_state"><span class="id" title="definition">network_state</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">cs01</span> := <a class="idref" href="Custom.Map.html#lookup"><span class="id" title="definition">Map.lookup</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns01"><span class="id" title="variable">ns01</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">cs12</span> := <a class="idref" href="Custom.Map.html#lookup"><span class="id" title="definition">Map.lookup</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns12"><span class="id" title="variable">ns12</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">cs02</span> := <a class="idref" href="Custom.Map.html#lookup"><span class="id" title="definition">Map.lookup</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns02"><span class="id" title="variable">ns02</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_status"><span class="id" title="projection">connection_status</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#cs01"><span class="id" title="variable">cs01</span></a>, <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_status"><span class="id" title="projection">connection_status</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#cs12"><span class="id" title="variable">cs12</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#CLOSED"><span class="id" title="constructor">CLOSED</span></a>, <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#CLOSED"><span class="id" title="constructor">CLOSED</span></a> ⇒ <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_status"><span class="id" title="projection">connection_status</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#cs01"><span class="id" title="variable">cs01</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#CLOSED"><span class="id" title="constructor">CLOSED</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#CLOSED"><span class="id" title="constructor">CLOSED</span></a>, <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#PENDING"><span class="id" title="constructor">PENDING</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#PENDING"><span class="id" title="constructor">PENDING</span></a>, <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#PENDING"><span class="id" title="constructor">PENDING</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_status"><span class="id" title="projection">connection_status</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#cs01"><span class="id" title="variable">cs01</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#PENDING"><span class="id" title="constructor">PENDING</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#ACCEPTED"><span class="id" title="constructor">ACCEPTED</span></a>, <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#PENDING"><span class="id" title="constructor">PENDING</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#ACCEPTED"><span class="id" title="constructor">ACCEPTED</span></a>, <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#ACCEPTED"><span class="id" title="constructor">ACCEPTED</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_status"><span class="id" title="projection">connection_status</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#cs01"><span class="id" title="variable">cs01</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#ACCEPTED"><span class="id" title="constructor">ACCEPTED</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#CLOSED"><span class="id" title="constructor">CLOSED</span></a>, <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#ACCEPTED"><span class="id" title="constructor">ACCEPTED</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#PENDING"><span class="id" title="constructor">PENDING</span></a>, <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#ACCEPTED"><span class="id" title="constructor">ACCEPTED</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#ACCEPTED"><span class="id" title="constructor">ACCEPTED</span></a>, <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#CLOSED"><span class="id" title="constructor">CLOSED</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#PENDING"><span class="id" title="constructor">PENDING</span></a>, <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#CLOSED"><span class="id" title="constructor">CLOSED</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_inbytes"><span class="id" title="projection">connection_inbytes</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#cs01"><span class="id" title="variable">cs01</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_inbytes"><span class="id" title="projection">connection_inbytes</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#cs12"><span class="id" title="variable">cs12</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_inbytes"><span class="id" title="projection">connection_inbytes</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#cs02"><span class="id" title="variable">cs02</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_outbytes"><span class="id" title="projection">connection_outbytes</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#cs12"><span class="id" title="variable">cs12</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_outbytes"><span class="id" title="projection">connection_outbytes</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#cs01"><span class="id" title="variable">cs01</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_outbytes"><span class="id" title="projection">connection_outbytes</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#cs02"><span class="id" title="variable">cs02</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="ScramblingFacts.scrambled_transitive_empty"><span class="id" title="lemma">scrambled_transitive_empty</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ns12</span> <span class="id" title="var">ns02</span> <span class="id" title="var">ns01</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#network_state"><span class="id" title="definition">network_state</span></a>) <span class="id" title="var">tr2</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.combined_networks"><span class="id" title="definition">combined_networks</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns01"><span class="id" title="variable">ns01</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns12"><span class="id" title="variable">ns12</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns02"><span class="id" title="variable">ns02</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#network_scrambled_"><span class="id" title="inductive">network_scrambled_</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns12"><span class="id" title="variable">ns12</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr2"><span class="id" title="variable">tr2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#network_scrambled_"><span class="id" title="inductive">network_scrambled_</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns02"><span class="id" title="variable">ns02</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr2"><span class="id" title="variable">tr2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="ScramblingFacts.scrambled_transitive_"><span class="id" title="lemma">scrambled_transitive_</span></a> <span class="id" title="var">ns01</span> <span class="id" title="var">ns12</span> <span class="id" title="var">ns02</span> <span class="id" title="var">tr0</span> <span class="id" title="var">tr1</span> <span class="id" title="var">tr2</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.combined_networks"><span class="id" title="definition">combined_networks</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns01"><span class="id" title="variable">ns01</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns12"><span class="id" title="variable">ns12</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns02"><span class="id" title="variable">ns02</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#network_scrambled_"><span class="id" title="inductive">network_scrambled_</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns01"><span class="id" title="variable">ns01</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr0"><span class="id" title="variable">tr0</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr1"><span class="id" title="variable">tr1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#network_scrambled_"><span class="id" title="inductive">network_scrambled_</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns12"><span class="id" title="variable">ns12</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr1"><span class="id" title="variable">tr1</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr2"><span class="id" title="variable">tr2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#network_scrambled_"><span class="id" title="inductive">network_scrambled_</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns02"><span class="id" title="variable">ns02</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr0"><span class="id" title="variable">tr0</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr2"><span class="id" title="variable">tr2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hcombined</span> <span class="id" title="var">H01_scrambled</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">tr2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">Hcombined</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H01_scrambled</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.scrambled_transitive_empty"><span class="id" title="axiom">scrambled_transitive_empty</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>.<br/>

<br/>
<span class="comment">(*<br/>
Lemma&nbsp;scrambled_transitive_<br/>
*)</span><br/>

<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="ScramblingFacts.scrambled_transitive"><span class="id" title="instance">scrambled_transitive</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Classes.RelationClasses.html#Transitive"><span class="id" title="class">Transitive</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#network_scrambled"><span class="id" title="definition">network_scrambled</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Classes.RelationClasses.html#Transitive"><span class="id" title="class">Transitive</span></a>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.TransitivityProof"><span class="id" title="section">TransitivityProof</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Proved.&nbsp;*)</span><br/>
<span class="id" title="keyword">Section</span> <a name="ScramblingFacts.ReflexivityProof"><span class="id" title="section">ReflexivityProof</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;The&nbsp;notion&nbsp;of&nbsp;"open"&nbsp;connection&nbsp;is&nbsp;not&nbsp;quite&nbsp;the&nbsp;same<br/>
&nbsp;&nbsp;&nbsp;depending&nbsp;on&nbsp;whether&nbsp;we're&nbsp;on&nbsp;the&nbsp;client&nbsp;side&nbsp;or&nbsp;server&nbsp;side.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;For&nbsp;a&nbsp;client,&nbsp;open&nbsp;connections&nbsp;are&nbsp;those&nbsp;that&nbsp;are<br/>
&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">PENDING</span></span>&nbsp;or&nbsp;<span class="inlinecode"><span class="id" title="var">ACCEPTED</span></span>.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="ScramblingFacts.is_open_conns_client"><span class="id" title="definition">is_open_conns_client</span></a> <span class="id" title="var">ns</span> : <a class="idref" href="DeepWeb.Lib.Util.html#connection_id"><span class="id" title="inductive">connection_id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">c</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_status"><span class="id" title="projection">connection_status</span></a> (<a class="idref" href="Custom.Map.html#lookup"><span class="id" title="definition">Map.lookup</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns"><span class="id" title="variable">ns</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#c"><span class="id" title="variable">c</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#CLOSED"><span class="id" title="constructor">CLOSED</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;For&nbsp;a&nbsp;server,&nbsp;open&nbsp;connections&nbsp;are&nbsp;those&nbsp;that&nbsp;it&nbsp;<span class="inlinecode"><span class="id" title="var">ACCEPTED</span></span>.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="ScramblingFacts.is_open_conns_server"><span class="id" title="definition">is_open_conns_server</span></a> <span class="id" title="var">ns</span> : <a class="idref" href="DeepWeb.Lib.Util.html#connection_id"><span class="id" title="inductive">connection_id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">c</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_status"><span class="id" title="projection">connection_status</span></a> (<a class="idref" href="Custom.Map.html#lookup"><span class="id" title="definition">Map.lookup</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns"><span class="id" title="variable">ns</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#c"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#ACCEPTED"><span class="id" title="constructor">ACCEPTED</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" title="var">clean_state</span></span> <span class="inlinecode"><span class="id" title="var">ns</span></span>&nbsp;holds&nbsp;when&nbsp;all&nbsp;connections&nbsp;<span class="inlinecode"><span class="id" title="var">ns</span></span><br/>
&nbsp;&nbsp;&nbsp;have&nbsp;empty&nbsp;buffers.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="ScramblingFacts.clean_state"><span class="id" title="definition">clean_state</span></a> (<span class="id" title="var">ns</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#network_state"><span class="id" title="definition">network_state</span></a>) := <span class="id" title="keyword">∀</span> <span class="id" title="var">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">cs</span> := <a class="idref" href="Custom.Map.html#lookup"><span class="id" title="definition">Map.lookup</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns"><span class="id" title="variable">ns</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_status"><span class="id" title="projection">connection_status</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#cs"><span class="id" title="variable">cs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#PENDING"><span class="id" title="constructor">PENDING</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_inbytes"><span class="id" title="projection">connection_inbytes</span></a>  <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#cs"><span class="id" title="variable">cs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_outbytes"><span class="id" title="projection">connection_outbytes</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#cs"><span class="id" title="variable">cs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="ScramblingFacts.bind_transition"><span class="id" title="definition">bind_transition</span></a> {<span class="id" title="var">S</span> <span class="id" title="var">B</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">a</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>)) (<span class="id" title="var">b</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#B"><span class="id" title="variable">B</span></a>)) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#B"><span class="id" title="variable">B</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> <a name="4c730dc57f6fe983eeb52a11babf0910"><span class="id" title="notation">&quot;</span></a>&gt;&gt;=" := <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.bind_transition"><span class="id" title="definition">bind_transition</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 30).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="ScramblingFacts.open_scrambled_reflexive"><span class="id" title="lemma">open_scrambled_reflexive</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">ns</span> <span class="id" title="var">tr</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.clean_state"><span class="id" title="definition">clean_state</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns"><span class="id" title="variable">ns</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.open_trace"><span class="id" title="definition">open_trace</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.is_open_conns_server"><span class="id" title="definition">is_open_conns_server</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns"><span class="id" title="variable">ns</span></a>) <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#network_scrambled_"><span class="id" title="inductive">network_scrambled_</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns"><span class="id" title="variable">ns</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ns</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">ns</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">as</span> [ | [ <span class="id" title="var">c</span> | <span class="id" title="var">c</span> <span class="id" title="var">b</span> | <span class="id" title="var">c</span> <span class="id" title="var">b</span> ] <span class="id" title="var">tr</span> ];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ns</span> <span class="id" title="var">Hns_clean</span> <span class="id" title="var">Htr_open</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;<span class="inlinecode"></span>&nbsp;*)</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;NewConnection&nbsp;c&nbsp;::&nbsp;tr&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#ScrambleClient"><span class="id" title="constructor">ScrambleClient</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connect_success"><span class="id" title="lemma">connect_success</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr_open</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.is_open_conns_server"><span class="id" title="definition">is_open_conns_server</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hns_clean</span> <span class="id" title="var">c</span>) <span class="id" title="keyword">as</span> [ ? ? ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_status"><span class="id" title="projection">connection_status</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#ScrambleServer"><span class="id" title="constructor">ScrambleServer</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#accept_success"><span class="id" title="lemma">accept_success</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr_open</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.is_open_conns_server"><span class="id" title="definition">is_open_conns_server</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Custom.Map.html#update_lookup_eq"><span class="id" title="lemma">Map.update_lookup_eq</span></a>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Custom.Map.html#update_update_eq"><span class="id" title="axiom">Map.update_update_eq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Custom.Map.html#update_lookup_eq"><span class="id" title="lemma">Map.update_lookup_eq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">c0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (@<span class="id" title="method">dec</span> (<span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">c0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Custom.Map.html#update_lookup_eq"><span class="id" title="lemma">Map.update_lookup_eq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">discriminate</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Custom.Map.html#update_lookup_neq"><span class="id" title="lemma">Map.update_lookup_neq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hns_clean</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr_open</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr0</span> <span class="id" title="var">Htr1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.open_trace_prop"><span class="id" title="lemma">open_trace_prop</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">Htr1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">c0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.is_open_conns_server"><span class="id" title="definition">is_open_conns_server</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Custom.Map.html#update_update_eq"><span class="id" title="axiom">Map.update_update_eq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Custom.Map.html#update_lookup_eq"><span class="id" title="lemma">Map.update_lookup_eq</span></a> <span class="id" title="keyword">with</span> (1 := <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (@<span class="id" title="method">dec</span> (<span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">c0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Custom.Map.html#update_lookup_eq"><span class="id" title="lemma">Map.update_lookup_eq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Custom.Map.html#update_lookup_neq"><span class="id" title="lemma">Map.update_lookup_neq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> []; <span class="id" title="tactic">auto</span>; <span class="id" title="var">contradiction</span>. }<br/>
<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;ToServer&nbsp;c&nbsp;b&nbsp;::&nbsp;tr&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_status"><span class="id" title="projection">connection_status</span></a> (<a class="idref" href="Custom.Map.html#lookup"><span class="id" title="definition">Map.lookup</span></a> <span class="id" title="var">ns</span> <span class="id" title="var">c</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#ACCEPTED"><span class="id" title="constructor">ACCEPTED</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">Htr_open</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#ScrambleClient"><span class="id" title="constructor">ScrambleClient</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#client_send"><span class="id" title="definition">client_send</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> (<span class="id" title="var">Hns_clean</span> <span class="id" title="var">_</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#ScrambleServer"><span class="id" title="constructor">ScrambleServer</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#server_recv"><span class="id" title="definition">server_recv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Custom.Map.html#update_lookup_eq"><span class="id" title="lemma">Map.update_lookup_eq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Custom.Map.html#update_update_eq"><span class="id" title="axiom">Map.update_update_eq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#update_in"><span class="id" title="definition">update_in</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="Custom.Map.html#lookup"><span class="id" title="definition">Map.lookup</span></a> <span class="id" title="var">ns</span> <span class="id" title="var">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">erewrite</span> <a class="idref" href="Custom.Map.html#lookup_update_eq"><span class="id" title="axiom">Map.lookup_update_eq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">Htr_open</span>. } }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hns_clean</span> <span class="id" title="var">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Custom.Map.html#lookup"><span class="id" title="definition">Map.lookup</span></a>; <span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#update_in"><span class="id" title="definition">update_in</span></a>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hns_clean</span>. }<br/>
<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;FromServer&nbsp;c&nbsp;b&nbsp;::&nbsp;tr&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#connection_status"><span class="id" title="projection">connection_status</span></a> (<a class="idref" href="Custom.Map.html#lookup"><span class="id" title="definition">Map.lookup</span></a> <span class="id" title="var">ns</span> <span class="id" title="var">c</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#ACCEPTED"><span class="id" title="constructor">ACCEPTED</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">Htr_open</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#ScrambleServer"><span class="id" title="constructor">ScrambleServer</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#server_send"><span class="id" title="definition">server_send</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> (<span class="id" title="var">Hns_clean</span> <span class="id" title="var">_</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#ScrambleClient"><span class="id" title="constructor">ScrambleClient</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#client_recv"><span class="id" title="definition">client_recv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Custom.Map.html#update_lookup_eq"><span class="id" title="lemma">Map.update_lookup_eq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Custom.Map.html#update_update_eq"><span class="id" title="axiom">Map.update_update_eq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#update_out"><span class="id" title="definition">update_out</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="Custom.Map.html#lookup"><span class="id" title="definition">Map.lookup</span></a> <span class="id" title="var">ns</span> <span class="id" title="var">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">erewrite</span> <a class="idref" href="Custom.Map.html#lookup_update_eq"><span class="id" title="axiom">Map.lookup_update_eq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">Htr_open</span>. } }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hns_clean</span> <span class="id" title="var">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Custom.Map.html#lookup"><span class="id" title="definition">Map.lookup</span></a>; <span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkModel.html#update_out"><span class="id" title="definition">update_out</span></a>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hns_clean</span>. }<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="ScramblingFacts.scrambled_reflexive"><span class="id" title="instance">scrambled_reflexive</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Classes.RelationClasses.html#Reflexive"><span class="id" title="class">Reflexive</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.network_scrambled_wf"><span class="id" title="definition">network_scrambled_wf</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Classes.RelationClasses.html#Reflexive"><span class="id" title="class">Reflexive</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr_wf</span> <span class="id" title="var">_H</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">_H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.equiv_open_wf"><span class="id" title="axiom">equiv_open_wf</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr_wf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.open_scrambled_reflexive"><span class="id" title="lemma">open_scrambled_reflexive</span></a>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span> <span class="id" title="var">c</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">discriminate</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.open_trace_prop"><span class="id" title="lemma">open_trace_prop</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">Htr_wf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.is_open_conns_server"><span class="id" title="definition">is_open_conns_server</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">discriminate</span> + <span class="id" title="tactic">intros</span> []. }<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.ReflexivityProof"><span class="id" title="section">ReflexivityProof</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;can&nbsp;always&nbsp;add&nbsp;sends&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;a&nbsp;trace.&nbsp;*)</span><br/>
<span class="id" title="keyword">Conjecture</span> <a name="ScramblingFacts.trailing_sends_preserve_scrambled"><span class="id" title="axiom">trailing_sends_preserve_scrambled</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">ns</span> <span class="id" title="var">tr</span> <span class="id" title="var">str</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#network_scrambled_"><span class="id" title="inductive">network_scrambled_</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns"><span class="id" title="variable">ns</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#str"><span class="id" title="variable">str</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">tr'</span> <span class="id" title="var">str'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;No&nbsp;<span class="inlinecode"><span class="id" title="var">server_accept</span></span>&nbsp;or&nbsp;<span class="inlinecode"><span class="id" title="var">server_recv</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#is_true"><span class="id" title="definition">is_true</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#is_FromServer"><span class="id" title="definition">is_FromServer</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr'"><span class="id" title="variable">tr'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;No&nbsp;<span class="inlinecode"><span class="id" title="var">client_recv</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#is_true"><span class="id" title="definition">is_true</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">ev</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#is_FromServer"><span class="id" title="definition">is_FromServer</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ev"><span class="id" title="variable">ev</span></a>)) <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr'"><span class="id" title="variable">tr'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Make&nbsp;sure&nbsp;the&nbsp;extended&nbsp;traces&nbsp;are&nbsp;well-formed.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.wf_trace"><span class="id" title="definition">wf_trace</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr'"><span class="id" title="variable">tr'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts.wf_trace"><span class="id" title="definition">wf_trace</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#str"><span class="id" title="variable">str</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#str'"><span class="id" title="variable">str'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Traces.html#network_scrambled_"><span class="id" title="inductive">network_scrambled_</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ns"><span class="id" title="variable">ns</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#tr'"><span class="id" title="variable">tr'</span></a>) (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#str"><span class="id" title="variable">str</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#str'"><span class="id" title="variable">str'</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Scramble.html#ScramblingFacts"><span class="id" title="module">ScramblingFacts</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>